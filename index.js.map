{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["// STATE\r\n\r\nlet page = null; // \"home\" | \"favorites\"\r\nlet category = null; // \"muscles\" | \"bodypart\" | \"equipment\"\r\nlet filter = null; // string | null\r\nlet currentPage = null; // number | null\r\nlet searchText = null; // string | null\r\nlet ratingOverlayId = null; // string | null\r\n\r\n\r\n// DOM OBJECTS\r\n\r\nconst navLinks = document.querySelectorAll(\"nav .nav-item\");\r\nconst menu = document.querySelector(\".mobile-menu\");\r\n\r\nconst hero = document.querySelector(\"section.hero\");\r\n\r\nconst main = document.querySelector(\"section.main div.main\");\r\nconst mainTitle = document.querySelector(\".route .title\");\r\nconst mainSeparator = document.querySelector(\".route .separator\");\r\nconst mainRoute = document.querySelector(\".route .category-title\");\r\nconst search = document.querySelector(\".filters .search-bar\");\r\nconst categories = document.querySelector(\".filters .categories\");\r\n\r\nconst catGrid = document.querySelector(\"section.main .results .categories\");\r\nconst exerGrid = document.querySelector(\"section.main .results .exercises\");\r\nconst favGrid = document.querySelector(\"section.main .results .favorites\");\r\n\r\nconst paginator = document.querySelector(\"section.main .results .paginator\");\r\n\r\nconst exerciseTemplate = document.querySelector(\"#super-hidden .exercise\");\r\n\r\nconst exerciseOverlayElement = document.querySelector(\"#exercise-overlay\");\r\nconst rateOverlayElement = document.querySelector(\"#rate-overlay\");\r\n\r\n\r\n// STATE SETTERS\r\n\r\nfunction setPage(it) {\r\n  if (page === it) return;\r\n\r\n  page = it;\r\n\r\n  navLinks.forEach((link) => {\r\n    link.classList.remove(\"active\");\r\n    const text = link.firstElementChild.textContent;\r\n    const needed = it.charAt(0).toUpperCase() + it.slice(1);\r\n    if (text === needed) {\r\n      link.classList.add(\"active\");\r\n    }\r\n  });\r\n\r\n  hero.style.display = it === \"home\" ? \"\" : \"none\";\r\n\r\n  mainTitle.textContent = it === \"home\" ? \"Exercises\" : \"Favorites\";\r\n\r\n  if (it === \"home\") {\r\n    main.classList.remove(\"fav\");\r\n    favGrid.style.display = \"none\";\r\n    categories.style.display = \"flex\";\r\n    if (filter !== null) {\r\n      catGrid.style.display = \"none\";\r\n      exerGrid.style.display = \"grid\";\r\n      search.style.display = \"flex\";\r\n      mainSeparator.style.display = \"block\";\r\n      mainRoute.style.display = \"block\";\r\n    } else {\r\n      catGrid.style.display = \"grid\";\r\n      exerGrid.style.display = \"none\";\r\n      search.style.display = \"none\";\r\n      mainSeparator.style.display = \"none\";\r\n      mainRoute.style.display = \"none\";\r\n    }\r\n  } else {\r\n    main.classList.add(\"fav\");\r\n    catGrid.style.display = \"none\";\r\n    exerGrid.style.display = \"none\";\r\n    favGrid.style.display = \"grid\";\r\n    categories.style.display = \"none\";\r\n    search.style.display = \"none\";\r\n    mainSeparator.style.display = \"none\";\r\n    mainRoute.style.display = \"none\";\r\n    updateFavorites(1).then((n) => setPaginator(n));\r\n  }\r\n}\r\n\r\nasync function setCategory(it, page) {\r\n  if (category === it) return;\r\n\r\n  category = it;\r\n  filter = null;\r\n  searchText = null;\r\n  search.firstElementChild.value = \"\";\r\n  search.style.display = \"none\";\r\n\r\n  catGrid.style.display = \"grid\";\r\n  exerGrid.style.display = \"none\";\r\n  mainSeparator.style.display = \"none\";\r\n  mainRoute.style.display = \"none\";\r\n  \r\n  Array.from(categories.children).forEach((cat) => {\r\n    cat.classList.remove(\"active\");\r\n    if (cat.textContent === \"Muscles\" && it === \"muscles\") \r\n      cat.classList.add(\"active\");\r\n    if (cat.textContent === \"Body parts\" && it === \"bodypart\") \r\n      cat.classList.add(\"active\");\r\n    if (cat.textContent === \"Equipment\" && it === \"equipment\") \r\n      cat.classList.add(\"active\");\r\n  });\r\n\r\n  const totalPages = await updateCategory(it, 1);\r\n\r\n  setPaginator(totalPages);\r\n}\r\n\r\nasync function updateCategory(it, page) {\r\n  let name;\r\n  if (it === \"muscles\") name = \"Muscles\";\r\n  if (it === \"bodypart\") name = \"Body%20parts\";\r\n  if (it === \"equipment\") name = \"Equipment\";\r\n\r\n  const response = await fetch(`https://your-energy.b.goit.study/api/filters?page=${page}&limit=12&filter=${name}`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Accept\": \"application/json\",\r\n    },\r\n  });\r\n\r\n  const result = await response.json();\r\n\r\n  while (catGrid.firstChild) {\r\n    catGrid.removeChild(catGrid.firstChild);\r\n  }\r\n\r\n  result.results.forEach(res => {\r\n    const newCat = document.createElement(\"a\");\r\n\r\n    newCat.style.backgroundImage = \"url(\"+res.imgURL+\")\";\r\n\r\n    newCat.addEventListener(\"click\", () => setFilter(res.name));\r\n\r\n    const newTitle = document.createElement(\"span\");\r\n    newTitle.textContent = res.name.charAt(0).toUpperCase() + res.name.slice(1);\r\n    newCat.appendChild(newTitle);\r\n\r\n    const newText = document.createElement(\"span\");\r\n    newText.textContent = res.filter;\r\n    newCat.appendChild(newText);\r\n\r\n    catGrid.appendChild(newCat);\r\n  });\r\n\r\n  return result.totalPages;\r\n}\r\n\r\nasync function setFilter(it) {\r\n  filter = it;\r\n\r\n  catGrid.style.display = \"none\";\r\n  exerGrid.style.display = \"grid\";\r\n  mainSeparator.style.display = \"block\";\r\n  mainRoute.style.display = \"block\";\r\n  search.style.display = \"flex\";\r\n\r\n  mainRoute.textContent = it.charAt(0).toUpperCase() + it.slice(1);\r\n\r\n  const totalPages = await updateExercises(it, 1, searchText);\r\n\r\n  setPaginator(totalPages);\r\n}\r\n\r\nasync function updateExercises(it, page, keyword) {\r\n  const api = `https://your-energy.b.goit.study/api/exercises?${category}=${it}&page=${page !== null ? page : 1}&limit=10${ keyword != null ? \"&keyword=\"+keyword : \"\" }`;\r\n  const response = await fetch(api, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Accept\": \"application/json\",\r\n    },\r\n  });\r\n\r\n  const result = await response.json();\r\n\r\n  while (exerGrid.firstChild) {\r\n    exerGrid.removeChild(exerGrid.firstChild);\r\n  }\r\n\r\n  if (result.results.length === 0) {\r\n    const noResults = document.createElement(\"p\");\r\n    noResults.classList.add(\"no-results\");\r\n    noResults.textContent = \"Your search query yilded no results...\";\r\n    exerGrid.appendChild(noResults);\r\n  } else {\r\n    result.results.forEach(res => {\r\n      const newEx = exerciseTemplate.cloneNode(true);\r\n\r\n      newEx.addEventListener(\"click\", () => exerciseOverlay(res));\r\n\r\n      newEx.querySelector(\".rating p\").textContent = res.rating;\r\n      newEx.querySelector(\".exercise-title\").textContent = res.name.charAt(0).toUpperCase() + res.name.slice(1);\r\n      newEx.querySelector(\".third > :nth-child(1) > :last-child\").textContent = res.burnedCalories;\r\n      newEx.querySelector(\".third > :nth-child(2) > :last-child\").textContent = res.bodyPart;\r\n      newEx.querySelector(\".third > :nth-child(3) > :last-child\").textContent = res.target;\r\n\r\n      exerGrid.appendChild(newEx);\r\n    });\r\n  }\r\n\r\n  return result.totalPages;\r\n}\r\n\r\nasync function updateFavorites(pageN) {\r\n  const favs = JSON.parse(localStorage.getItem('favorites')) || {};\r\n\r\n  while (favGrid.firstChild) {\r\n    favGrid.removeChild(favGrid.firstChild);\r\n  }\r\n  const noResults = document.createElement(\"p\");\r\n  noResults.classList.add(\"no-results\");\r\n\r\n  if (Object.keys(favs).length === 0) {\r\n    noResults.textContent = \"It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.\";\r\n    favGrid.appendChild(noResults);\r\n    return 0;\r\n  }\r\n  noResults.textContent = \"Loading...\";\r\n  favGrid.appendChild(noResults);\r\n\r\n  let responces = [];\r\n\r\n  Object.keys(favs).slice(10*(pageN-1), 10*pageN).forEach((id) => {\r\n    const api = `https://your-energy.b.goit.study/api/exercises/${id}`;\r\n    responces.push(\r\n      fetch(api, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"Accept\": \"application/json\",\r\n        },\r\n      })\r\n    );\r\n  });\r\n \r\n  responces = await Promise.all(responces);\r\n\r\n  let results = [];\r\n  responces.forEach((r) => results.push(r.json()));\r\n\r\n  results = await Promise.all(results);\r\n\r\n  favGrid.removeChild(favGrid.firstChild);\r\n  results.forEach(res => {\r\n    const newEx = exerciseTemplate.cloneNode(true);\r\n\r\n    console.log(res);\r\n\r\n    newEx.addEventListener(\"click\", () => exerciseOverlay(res));\r\n\r\n    newEx.querySelector(\".exercise-title\").textContent = res.name.charAt(0).toUpperCase() + res.name.slice(1);\r\n    newEx.querySelector(\".third > :nth-child(1) > :last-child\").textContent = res.burnedCalories;\r\n    newEx.querySelector(\".third > :nth-child(2) > :last-child\").textContent = res.bodyPart;\r\n    newEx.querySelector(\".third > :nth-child(3) > :last-child\").textContent = res.target;\r\n\r\n    favGrid.appendChild(newEx);\r\n  });\r\n  \r\n  return Math.ceil(Object.keys(favs).length/10);\r\n}\r\n\r\nfunction setPaginator(n) {\r\n  currentPage = 1;\r\n\r\n  if (n < 2) {\r\n    paginator.style.display = \"none\";\r\n    return;\r\n  }\r\n\r\n  paginator.style.display = \"\";\r\n\r\n  while (paginator.firstChild) {\r\n    paginator.removeChild(paginator.firstChild);\r\n  }\r\n\r\n  for (let i = 1; i <= n; i++) {\r\n    const pageToggle = document.createElement(\"a\");\r\n\r\n    pageToggle.textContent = i;\r\n\r\n    pageToggle.setAttribute('aria-label', `Enter page ${i}`);\r\n\r\n    if (i === 1) pageToggle.classList.add(\"active\");\r\n\r\n    pageToggle.addEventListener(\"click\", async () => {\r\n      if (i !== currentPage) {\r\n        Array.from(paginator.children)[currentPage-1].classList.remove('active');\r\n        Array.from(paginator.children)[i-1].classList.add('active');\r\n        currentPage = i;\r\n        if (page === \"home\") {\r\n          if (filter == null) {\r\n            await updateCategory(category, i);\r\n          } else {\r\n            await updateExercises(filter, i, searchText);\r\n          }\r\n        } else {\r\n          await updateFavorites(i);\r\n        }\r\n        main.querySelector(\".results\").scrollIntoView({\r\n          behavior: \"smooth\",\r\n          block: \"start\"\r\n        });\r\n      }\r\n    });\r\n\r\n    paginator.appendChild(pageToggle);\r\n  }\r\n}\r\n\r\n\r\n// OVERLAYS\r\n\r\nfunction exerciseOverlay(exercise) {\r\n  exerciseOverlayElement.querySelector(\".exercise-image\").setAttribute(\"src\", exercise.gifUrl);\r\n  exerciseOverlayElement.querySelector(\".title\").textContent = exercise.name.charAt(0).toUpperCase() + exercise.name.slice(1);\r\n  exerciseOverlayElement.querySelector(\".rating p\").textContent = exercise.rating;\r\n  exerciseOverlayElement.querySelector(\".params > :nth-child(1) > :last-child\").textContent = exercise.target;\r\n  exerciseOverlayElement.querySelector(\".params > :nth-child(2) > :last-child\").textContent = exercise.bodyPart;\r\n  exerciseOverlayElement.querySelector(\".params > :nth-child(3) > :last-child\").textContent = exercise.equipment;\r\n  exerciseOverlayElement.querySelector(\".params > :nth-child(4) > :last-child\").textContent = exercise.popularity;\r\n  exerciseOverlayElement.querySelector(\".params > :nth-child(5) > :last-child\").textContent = exercise.burnedCalories;\r\n  exerciseOverlayElement.querySelector(\".description\").textContent = exercise.description;\r\n\r\n  const favs = JSON.parse(localStorage.getItem('favorites')) || {};\r\n\r\n  const id = exercise._id;\r\n  ratingOverlayId = id;\r\n  const favBtn = exerciseOverlayElement.querySelector(\".buttons :first-child\");\r\n\r\n  if (Object.hasOwn(favs, id)) {\r\n    favBtn.classList.add(\"remove\");\r\n    favBtn.classList.remove(\"add\");\r\n    favBtn.firstElementChild.textContent = \"Remove favorite\";\r\n  } else {\r\n    favBtn.classList.add(\"add\");\r\n    favBtn.classList.remove(\"remove\");\r\n    favBtn.firstElementChild.textContent = \"Add to favorites\";\r\n  }\r\n\r\n  function fav(e) {\r\n    if (favBtn.classList.contains(\"add\")) {\r\n      favs[id] = true;\r\n      favBtn.classList.add(\"remove\");\r\n      favBtn.classList.remove(\"add\");\r\n      favBtn.firstElementChild.textContent = \"Remove favorite\";\r\n    } else {\r\n      delete favs[id];\r\n      favBtn.classList.add(\"add\");\r\n      favBtn.classList.remove(\"remove\");\r\n      favBtn.firstElementChild.textContent = \"Add to favorites\";\r\n    }\r\n    localStorage.setItem('favorites', JSON.stringify(favs));\r\n    if (page === \"favorites\") updateFavorites(currentPage);\r\n  }\r\n\r\n  function rate(e) {\r\n    ratingOverlay();\r\n  }\r\n\r\n  function close(e) {\r\n    if (e.target !== e.currentTarget) return;\r\n    exerciseOverlayElement.removeEventListener(\"click\", close);\r\n    exerciseOverlayElement.querySelector(\".close-icon img\").removeEventListener(\"click\", close);\r\n    favBtn.removeEventListener(\"click\", fav);\r\n    exerciseOverlayElement.querySelector(\".buttons .rate\").removeEventListener(\"click\", rate);\r\n    exerciseOverlayElement.style.display = \"none\";\r\n    ratingOverlayId = null;\r\n  }\r\n\r\n  exerciseOverlayElement.addEventListener(\"click\", close);\r\n  exerciseOverlayElement.querySelector(\".close-icon img\").addEventListener(\"click\", close);\r\n  favBtn.addEventListener(\"click\", fav);\r\n  exerciseOverlayElement.querySelector(\".buttons .rate\").addEventListener(\"click\", rate);\r\n\r\n  exerciseOverlayElement.style.display = \"flex\";\r\n}\r\n\r\nfunction ratingOverlay() {\r\n  exerciseOverlayElement.style.display = \"none\";\r\n  rateOverlayElement.style.display = \"flex\";\r\n\r\n  document.querySelector(\"#rate-overlay form\").reset();\r\n\r\n  function close(e) {\r\n    if (e.target !== e.currentTarget) return;\r\n    exerciseOverlayElement.removeEventListener(\"click\", close);\r\n    exerciseOverlayElement.querySelector(\".close-icon img\").removeEventListener(\"click\", close);\r\n    exerciseOverlayElement.style.display = \"flex\";\r\n    rateOverlayElement.style.display = \"none\";\r\n  }\r\n\r\n  rateOverlayElement.addEventListener(\"click\", close);\r\n  rateOverlayElement.querySelector(\".close-icon img\").addEventListener(\"click\", close);\r\n}\r\n\r\n\r\n// LISTENERS\r\n\r\nnavLinks[0].addEventListener(\"click\", () => setPage(\"home\"));\r\nnavLinks[1].addEventListener(\"click\", () => setPage(\"favorites\"));\r\n\r\ndocument.querySelector(\"nav .nav-menu-toggle\").addEventListener(\"click\", () => {\r\n  menu.style.display = \"flex\";\r\n});\r\ndocument.querySelector(\".close-mobile-menu\").addEventListener(\"click\", () => {\r\n  menu.style.display = \"none\";\r\n});\r\ndocument.querySelector(\".mobile-middle\").firstElementChild.firstElementChild.addEventListener(\"click\", () => {\r\n  setPage(\"home\");\r\n  menu.style.display = \"none\";\r\n});\r\ndocument.querySelector(\".mobile-middle\").lastElementChild.firstElementChild.addEventListener(\"click\", () => {\r\n  setPage(\"favorites\");\r\n  menu.style.display = \"none\";\r\n});\r\n\r\nlet debounceTimeout;\r\nsearch.firstElementChild.addEventListener(\"input\", (e) => {\r\n  clearTimeout(debounceTimeout);\r\n  \r\n  while (exerGrid.firstChild) {\r\n    exerGrid.removeChild(exerGrid.firstChild);\r\n  }\r\n\r\n  const noResults = document.createElement(\"p\");\r\n  noResults.classList.add(\"no-results\");\r\n  noResults.textContent = \"Loading...\";\r\n  exerGrid.appendChild(noResults);\r\n\r\n  debounceTimeout = setTimeout(async () => {\r\n    searchText = e.target.value.trim();\r\n\r\n    const max = await updateExercises(filter, currentPage, searchText);\r\n    \r\n    setPaginator(max);\r\n  }, 1000);\r\n});\r\n\r\ndocument.querySelector(\"footer form\").addEventListener(\"submit\", async (e) => {\r\n  e.preventDefault();\r\n\r\n  const email = document.querySelector(\"footer #email\").value;\r\n\r\n  try {\r\n    const response = await fetch(\"https://your-energy.b.goit.study/api/subscription\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({ email })\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.message || \"Something went wrong, please try again\");\r\n    }\r\n\r\n    alert(data.message);\r\n    document.querySelector(\"footer form\").reset();\r\n\r\n  } catch (error) {\r\n    alert(error);\r\n  }\r\n});\r\n\r\nlet ratingDebounce;\r\nconst ratingInput = document.querySelector(\"#rate-overlay #rating\");\r\nratingInput.addEventListener('input', () => {\r\n  clearTimeout(ratingDebounce);\r\n  ratingDebounce = setTimeout(() => {\r\n    let value = parseFloat(ratingInput.value);\r\n\r\n    if (isNaN(value)) {\r\n      ratingInput.value = '';\r\n      return;\r\n    }\r\n\r\n    value = Math.min(Math.max(value, 0), 5);\r\n\r\n    ratingInput.value = value.toFixed(2);\r\n  }, 1000);\r\n});\r\n\r\ndocument.querySelector(\"#rate-overlay form\").addEventListener(\"submit\", async (e) => {\r\n  e.preventDefault();\r\n\r\n  const email = document.querySelector(\"#rate-overlay #email\").value;\r\n  const rating = parseFloat(document.querySelector(\"#rate-overlay #rating\").value);\r\n  const comment = document.querySelector(\"#rate-overlay #comment\").value;\r\n\r\n  try {\r\n    const response = await fetch(`https://your-energy.b.goit.study/api/exercises/${ratingOverlayId}/rating`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        rate: rating,\r\n        email: email,\r\n        review: comment\r\n      })\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.message || \"Something went wrong, please try again\");\r\n    }\r\n\r\n    alert(\"Your feedback has been accepted. Thank you for contributing to our community!\");\r\n    document.querySelector(\"#rate-overlay form\").reset();\r\n\r\n  } catch (error) {\r\n    alert(error);\r\n  }\r\n});\r\n\r\n// INIT\r\n\r\nsetPage(\"home\");\r\nsetCategory(\"muscles\");\r\n\r\nconst QUOTE_KEY = \"dailyQuote\";\r\nconst QUOTE_DATE_KEY = \"dailyQuoteDate\";\r\n\r\nfunction setQuote({ quote, author }) {\r\n  document.querySelector(\".quote .quote-text\").textContent = quote;\r\n  document.querySelector(\".quote .quote-author\").textContent = author;\r\n}\r\n\r\nfunction isToday(storedDate) {\r\n  const today = new Date().toISOString().split(\"T\")[0];\r\n  return storedDate === today;\r\n}\r\n\r\nconst storedQuote = localStorage.getItem(QUOTE_KEY);\r\nconst storedDate = localStorage.getItem(QUOTE_DATE_KEY);\r\n\r\nif (storedQuote && storedDate && isToday(storedDate)) {\r\n  setQuote(JSON.parse(storedQuote));\r\n} else {\r\n  fetch(\"https://your-energy.b.goit.study/api/quote\", {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Accept\": \"application/json\",\r\n    },\r\n  }).then(resp => resp.json()).then(content => {\r\n      setQuote(content);\r\n      localStorage.setItem(QUOTE_KEY, JSON.stringify(content));\r\n      localStorage.setItem(\r\n        QUOTE_DATE_KEY,\r\n        new Date().toISOString().split(\"T\")[0]\r\n      );\r\n    }).catch(console.error);\r\n}"],"names":["page","category","filter","currentPage","searchText","ratingOverlayId","navLinks","menu","hero","main","mainTitle","mainSeparator","mainRoute","search","categories","catGrid","exerGrid","favGrid","paginator","exerciseTemplate","exerciseOverlayElement","rateOverlayElement","setPage","it","link","text","needed","updateFavorites","n","setPaginator","setCategory","cat","totalPages","updateCategory","name","result","res","newCat","setFilter","newTitle","newText","updateExercises","keyword","api","noResults","newEx","exerciseOverlay","pageN","favs","responces","id","results","i","pageToggle","exercise","favBtn","fav","e","rate","ratingOverlay","close","debounceTimeout","max","email","response","data","error","ratingDebounce","ratingInput","value","rating","comment","QUOTE_KEY","QUOTE_DATE_KEY","setQuote","quote","author","isToday","storedDate","today","storedQuote","resp","content"],"mappings":"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"}